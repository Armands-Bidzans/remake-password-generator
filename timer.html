<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Professional Pomodoro timer for productivity">
  <meta name="keywords" content="pomodoro timer, focus timer, productivity tool">
  <title>Focus Timer</title>
  <link rel="stylesheet" href="timer.css" async>
  <style>
    .hidden {
      display: none;
    }
    .time-display {
      font-size: 36px;
      margin: 20px 0;
      text-align: center;
      border: none;
      background: transparent;
      pointer-events: auto;
      font-family: inherit;
      color: inherit;
      width: 150px;
    }
    .time-display:disabled {
      opacity: 1;
    }
    .button-group {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }
    .btn {
      padding: 12px 32px;
      border: none;
      border-radius: 8px;
      background: var(--primary);
      color: white;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }
  </style>
</head>
<body>
  <nav class="navbar" aria-label="Main navigation">
    <a class="nav-item" href="aboutpass.html">About passwords</a>
    <a class="nav-item" href="Terms+Conditions.html">Terms & Conditions</a>
    <a class="nav-item" href="author's profile.html">About author</a>
    <a class="nav-item" href="index.html">Password generator</a>
  </nav>

  <main class="container timer-container" role="main">
    <input type="text" 
           class="time-display" 
           id="timerInput"
           value="25:00"
           pattern="[0-9]{1,2}:[0-5][0-9]"
           oninput="handleTimeInput()"
           aria-label="Timer input in MM:SS format"
           autocomplete="off">
    
    <div class="button-group">
      <button class="btn timer-btn" id="startButton" onclick="startTimer()">Start</button>
      <button class="btn timer-btn hidden" id="pauseButton" onclick="pauseTimer()">Pause</button>
      <button class="btn timer-btn hidden" id="resumeButton" onclick="resumeTimer()">Resume</button>
      <button class="btn timer-btn" id="resetButton" onclick="resetTimer()">Reset</button>
    </div>

    <i class="icon-moon theme-toggler" 
       onclick="toggleDarkMode()" 
       tabindex="0"
       onkeypress="if(event.key === 'Enter' || event.key === ' ') toggleDarkMode()"></i>
  </main>

  <script>
    let timerInterval;
    let minutes = 25;
    let seconds = 0;
    const timerInput = document.getElementById('timerInput');
    const startButton = document.getElementById('startButton');
    const pauseButton = document.getElementById('pauseButton');
    const resumeButton = document.getElementById('resumeButton');
    const resetButton = document.getElementById('resetButton');
    let isRunning = false;
    let isPaused = false;

    function updateDisplay() {
      const displayValue = `${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
      timerInput.value = displayValue;
    }

    function handleTimeInput() {
      const input = timerInput.value.trim();
      const parts = input.split(':');
      
      if (parts.length === 2) {
        const inputMinutes = parseInt(parts[0], 10);
        const inputSeconds = parseInt(parts[1], 10);
        
        if (!isNaN(inputMinutes) && !isNaN(inputSeconds) && inputSeconds < 60) {
          minutes = inputMinutes;
          seconds = inputSeconds;
          updateDisplay();
        } else {
          updateDisplay();
        }
      } else {
        updateDisplay();
      }
    }

    function startTimer() {
      if (!isRunning) {
        isRunning = true;
        isPaused = false;
        timerInput.disabled = true;
        
        startButton.classList.add('hidden');
        pauseButton.classList.remove('hidden');
        timerInterval = setInterval(updateTimer, 1000);
      }
    }

    function pauseTimer() {
      if (isRunning && !isPaused) {
        clearInterval(timerInterval);
        isPaused = true;
        pauseButton.classList.add('hidden');
        resumeButton.classList.remove('hidden');
      }
    }

    function resumeTimer() {
      if (isRunning && isPaused) {
        timerInterval = setInterval(updateTimer, 1000);
        isPaused = false;
        resumeButton.classList.add('hidden');
        pauseButton.classList.remove('hidden');
      }
    }

    function resetTimer() {
      clearInterval(timerInterval);
      minutes = 25;
      seconds = 0;
      updateDisplay();
      timerInput.disabled = false;
      
      startButton.classList.remove('hidden');
      pauseButton.classList.add('hidden');
      resumeButton.classList.add('hidden');
      isRunning = false;
      isPaused = false;
    }

    function updateTimer() {
      if (seconds === 0) {
        if (minutes === 0) {
          clearInterval(timerInterval);
          alert("Time's up!");
          resetTimer();
          return;
        } else {
          minutes--;
          seconds = 59;
        }
      } else {
        seconds--;
      }
      updateDisplay();
    }

    // Инициализация
    updateDisplay();
  </script>
</body>
</html>