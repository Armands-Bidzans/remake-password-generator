<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<title>Таймер</title>
<link rel="stylesheet" href="timer.css" async>
</head>

<body>
<nav class="navbar">
  <a class="nav-item" href="aboutpass RU.html">Про пароли</a>
  <a class="nav-item" href="indexRu.html">Генератор пароля</a>
</nav>

<main class="timer-container">
  <input type="text" class="time-display" id="timerInput" value="25:00" pattern="[0-9]{1,2}:[0-5][0-9]">
<div class="button-group">
  <button class="btn" id="startButton">Старт</button>
  <button class="btn hidden" id="pauseButton">Пауза</button>
  <button class="btn hidden" id="resumeButton">Продолжить</button>
  <button class="btn" id="resetButton">Сброс</button>
</div>
</main>

  <script>
const timer = {min: 25, sec: 0, isRunning: false, isPaused: false,
elements: ['timerInput','startButton','pauseButton','resumeButton','resetButton']
.reduce((a,b) => (a[b] = document.getElementById(b), a), {}),
  update() {
  this.elements.timerInput.value = 
  `${this.min.toString().padStart(2,'0')}:${this.sec.toString().padStart(2,'0')}`
  },
  toggleButtons(...states) {
  states.forEach(([el, state]) => this.elements[el].classList.toggle('hidden', !state))
  },
  start() {
    if(this.isRunning) return
    this.isRunning = true
    this.elements.timerInput.disabled = true
    this.toggleButtons(['startButton',false], ['pauseButton',true])
    timerInterval = setInterval(() => this.tick(), 1000)
    },
  pause() {
    if(!this.isPaused) {
    clearInterval(timerInterval)
    this.isPaused = true
    this.toggleButtons(['pauseButton',false], ['resumeButton',true])
    }
  },
  resume() {
    if(this.isPaused) {
    timerInterval = setInterval(() => this.tick(), 1000)
    this.isPaused = false
    this.toggleButtons(['resumeButton',false], ['pauseButton',true])
    }
    },
  reset() {
  clearInterval(timerInterval)
    this.min = 25
    this.sec = 0
    this.isRunning = this.isPaused = false
    this.elements.timerInput.disabled = false
    this.toggleButtons(['startButton',true], ['pauseButton',false], ['resumeButton',false])
    this.update()
    },
    tick() {
      if(this.sec === 0) {
      if(this.min === 0) {
        alert("Время вышло!")
        this.reset()
          return
          }
        this.min--
        this.sec = 59
        } else this.sec--
        this.update()
      }
    }

    timer.elements.startButton.onclick = () => timer.start()
    timer.elements.pauseButton.onclick = () => timer.pause()
    timer.elements.resumeButton.onclick = () => timer.resume()
    timer.elements.resetButton.onclick = () => timer.reset()
    timer.elements.timerInput.oninput = () => {
      const [m,s] = timer.elements.timerInput.value.split(':').map(Number)
      if(!isNaN(m) && !isNaN(s) && s < 60 && m >= 0) {
        timer.min = m
        timer.sec = s
        timer.update()
      }
    }
    timer.update()
  </script>
</body>
</html>